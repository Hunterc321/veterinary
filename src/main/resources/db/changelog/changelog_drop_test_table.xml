<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.0.xsd">
<!-- Your changeSets go here -->
    <changeSet id="drop-test-table" author="Cosmin">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="test_table"/>
        </preConditions>
        <sql>
            DROP TABLE test_table;
        </sql>
    </changeSet>
    <changeSet id="create-test-table" author="Cosmin">
        <sql>
            CREATE TABLE test_table1;
        </sql>
    </changeSet>
    <changeSet id="create-test-table2" author="Cosmin">
        <sql>
            CREATE TABLE test_table1 (
                                         column_name1 int,
                                         column_name2 char
            );
        </sql>
    </changeSet>
    <changeSet id="rollback-original-changeset" author="YourName">
        <sql>
            DROP TABLE test_table1;
        </sql>
    </changeSet>
    <changeSet id="modify-pet-changeset" author="YourName">
        <sql>
            ALTER TABLE "pet"
            ADD COLUMN "owner_id" INTEGER,
            ADD FOREIGN KEY ("owner_id") REFERENCES "owner" ("id");
        </sql>
    </changeSet>
    <changeSet id="modify-service-change-constraint-changeset" author="YourName">
        <sql>
            ALTER TABLE "service"
            DROP CONSTRAINT "service_id_fkey";
        </sql>
    </changeSet>
    <changeSet id="modify-tables-change-constraint-changeset" author="YourName">
        <sql>
            ALTER TABLE "pet"
            DROP CONSTRAINT "pet_id_fkey";
            ALTER TABLE "appointment"
            DROP CONSTRAINT "appointment_id_fkey",
            ADD FOREIGN KEY ("vet_id") REFERENCES "veterinary" ("id");
        </sql>
    </changeSet>
    <changeSet id="alter-invoice-v1-changeset" author="YourName">
        <sql>
            ALTER TABLE "invoice"
                ADD COLUMN "appointment_id" INTEGER,
                ADD FOREIGN KEY ("appointment_id") REFERENCES "appointment" ("id");
        </sql>
    </changeSet>
    <changeSet id="alter-invoice-v2-changeset" author="YourName">
        <sql>
            ALTER TABLE "invoice"
                DROP CONSTRAINT "invoice_appointment_id_fkey";
        </sql>
    </changeSet>
    <changeSet id="create-many-to-many-serviceAppointment-v1-changeset" author="YourName">
        <sql>
            CREATE TABLE appointmentService (
                     "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                     "appointment_id" INTEGER,
                     "service_id" INTEGER,
                      FOREIGN KEY ("appointment_id") REFERENCES "appointment" (id),
                    FOREIGN KEY ("service_id") REFERENCES "service" (id)
            );
        </sql>
    </changeSet>
    <changeSet id="initialize-veterinary-table" author="Cosmin">
        <sql>
            INSERT INTO veterinary (name)
            VALUES ('Popescu'), ('Tudoran'), ('Lazarescu');
        </sql>
    </changeSet>
    <changeSet id="initialize-tables-v1" author="Cosmin">
        <sql>
            INSERT INTO owner (name, created_at)
            VALUES ('Owner1','2023-11-06 15:30:00'::timestamp ), ('Owner2', '2023-10-06 15:20:00'::timestamp), ('Owner3', '2023-9-06 11:30:00'::timestamp);
            ALTER TABLE pet
            ALTER created_at SET DEFAULT NOW();
            INSERT INTO pet(name, breed, owner_id)
            VALUES ('Rufus', 'british', 1), ('Holly', 'labrador', 2), ('Rollo', 'husky', 3);
            INSERT INTO appointment (pet_id, datetime, vet_id)
            VALUES (1, '2023-11-06 15:30:00', 1), (2, '2023-10-06 15:30:00', 2), (3, '2023-12-06 15:30:00', 3)
        </sql>
    </changeSet>




</databaseChangeLog>